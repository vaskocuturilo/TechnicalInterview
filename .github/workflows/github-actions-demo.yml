name: CI/CD Pipeline
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  gradle:
    strategy:
      matrix:
        os: [ ubuntu-latest ]
    runs-on: ${{ matrix.os }}


steps:
  # Install the Java.
  - uses: actions/checkout@v3
  - name: Setup Java
    uses: actions/setup-java@v3
    with:
      java-version: '17'
      distribution: adopt
      cache: 'gradle'

  - name: Setup MySql
    uses: nnhy/mysql-action@v1.0

  - name: Setup Gradle
    uses: gradle/gradle-build-action@v2

  - name: Execute Gradle bootRun
    run: ./gradlew bootRun

    # Run the Unit, API, UI tests.
  - name: Setup and execute Gradle 'test' task
    uses: gradle/gradle-build-action@v2
    with:
      arguments: test